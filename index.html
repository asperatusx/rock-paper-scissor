<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Game of rock paper scissor</title>
    </head>

    <body>
        <script>
            function getComputerChoice(){
                const choice = ['rock', 'paper', 'scissors'];
                return choice[Math.floor(Math.random()*choice.length)];
            }

            function getPlayerChoice(){
                const choice = prompt('please enter "rock", "paper", or "scissors"').toLowerCase();;
                return choice;

            }



            function playRound(playerSelection, computerSelection){
                
                while (playerSelection===computerSelection){
                    alert("Its a tie! Throw hands again");
                    console.log(computerSelection = getComputerChoice()); 
                    playerSelection = getPlayerChoice();
                }

                if (playerSelection==='rock'){
                    if (computerSelection === 'scissors'){
                        return "You win! Rock beats Scissors";
                    }
                    else return "You lose! Paper beats Rock";
                }
                if (playerSelection==='paper'){
                    if (computerSelection === 'rock'){
                        return "You win! Paper beats Rock";
                    }
                    else return "You lose! Scissors beats Paper"
                }
                if (playerSelection==='scissors'){
                    if (computerSelection==='paper'){
                        return "You win! Scissors beats Paper"
                    }
                    else return "You lose! Rock beats Scissors"
                }
            }
             


            function game(){
                let count = 0;
                let rounds = 5;
                let finalScore = "";
                let roundScore = "";
                for (i=1; i<=rounds; i++){
                    alert(`round ${i}`)
                    const playerSelection = getPlayerChoice();
                    const computerSelection = getComputerChoice();
                    roundScore=playRound(playerSelection, computerSelection);
                    console.log(roundScore);
                    if (roundScore.slice(0,8)==="You win!"){
                        count++;
                    }
                    console.log(count);
                }
                if (count>Math.floor(rounds/2)){
                    finalScore = "Winner";
                }
                else finalScore = "Loser";
                
                console.log(`The score is ${count}/${rounds}. You are a ${finalScore}!`)
            }

            game();

        </script>
    </body>
</html>